image: node

stages: 
    - verify 
    - build
    - package
    - release

services:
    - 
before_script: 
         - npm install
         - sudo gitlab-runner register -n \
        --url https://gitlab.com/ \
        --registration-token M6VPfsAEZyH_jryxoZxM \
        --executor shell \
        --description "My Runner"
        - sudo usermod -aG docker gitlab-runner
        - sudo -u gitlab-runner -H docker info
building: 
    only: 
        - master
    stage: build 
    script: 
        - npm build --prod

dockerise:
    image: docker:19.03.12
    before_script:
        - docker-info
    only: 
        - master
    stage: build
    script: 
    - docker info
    - docker build -t angularapp:1.0.0 .
    - mkdir imageDocker/
    artifacts:
        paths:
            - imageDocker