image: node
stages: 
    - verify 
    - build_app
    - build_container
    - package
    - release
 
    
building: 
    only: 
        - master
    stage: build_app 
    script: 
        - npm install
        - npm build --prod
    artifacts:
        paths:
            - dist/

dockerise:
    dependencies:
        - building
    image: docker:stable
    services:
        - docker:18.09-dind
    only: 
        - master
    stage: build_container
    script: 
    - docker info
    - docker build -t angularapp:1.0.0 .
    - mkdir imageDocker/
    artifacts:
        paths:
            - imageDocker



