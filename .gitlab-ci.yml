image: docker:stable
services:
    - docker:18.09-dind
stages: 
    - verify 
    - build_app
    - build_container
    - package
    - release
 

ğŸš¦ test: 
    stage: verify
    only: 
        - master
    script: 
        - npm run test
âš™ building: 
    image: node
    only: 
        - master
    stage: build_app 
    script: 
        - npm install
        - npm run build --prod
    artifacts:
        paths:
            - dist/

ğŸš¢ dockerise:
    dependencies:
        - âš™ building

    only: 
        - master
    stage: build_container
    script: 
    - docker info
    - docker build -t angularapp:1.0.0 .
    - mkdir imageDocker/
    artifacts:
        paths:
            - imageDocker



